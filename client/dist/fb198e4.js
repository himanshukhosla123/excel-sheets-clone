(window.webpackJsonp=window.webpackJsonp||[]).push([[4,6,7],{263:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return r}));"".concat("https://us-central1-angelone-nodejs.cloudfunctions.net/app","/api/demo");var o="".concat("https://us-central1-angelone-nodejs.cloudfunctions.net/app","/api/upload-excel"),l="".concat("https://us-central1-angelone-nodejs.cloudfunctions.net/app","/api/get-user-sheets"),r="".concat("https://us-central1-angelone-nodejs.cloudfunctions.net/app","/api/get-sheet-data")},264:function(t,e,n){"use strict";n.r(e);n(79),n(191),n(190),n(44),n(80);var o={name:"item-row",created:function(){var t=Object.keys(this.source);t.includes("_id")&&t.splice(t.indexOf("_id"),1),this.firstkey=t[0]},props:{onSelect:{type:Function,default:function(){}},index:{type:Number},source:{type:Object,default:function(){return{}}}}},l=n(43),component=Object(l.a)(o,(function(){var t=this;return(0,t._self._c)("div",{staticClass:"break-words px-3 py-2 mb-2 mx-2 min-h-5 cursor-pointer border border-white border-solid",on:{click:function(){return t.onSelect(t.source)}}},[t._v(t._s(t.source[t.firstkey]))])}),[],!1,null,null,null);e.default=component.exports},265:function(t,e,n){"use strict";n.r(e);n(190);var o={name:"item-row-info",props:{index:{type:Number},source:{type:Object,default:function(){return{}}}}},l=n(43),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"break-words bg-gray-300 p-2 mb-2 min-h-5 cursor-pointer border border-white text-black border-solid"},[t._v(t._s(t.source.key)+":- "),e("br"),t._v(" "+t._s(t.source.value))])}),[],!1,null,null,null);e.default=component.exports},267:function(t,e,n){"use strict";n.r(e);n(44);var o,l,r,c=n(270),d=(n(104),n(190),n(20),n(271)),f=n.n(d),h=n(264),v=n(265),m=n(263),w=(n(81),{name:"ExcelView",components:{"virtual-list":f.a,ItemInfoRow:v.default},props:{files:{type:Array,default:function(){return[]}},activeFileIndex:{type:Number,default:0}},data:function(){return{items:[],isLoading:!1,dataPagination:null,noResultsFound:!1,itemRowComponent:h.default,searchQuery:"",activeRowData:null}},created:function(){this.fileContentMap={},this.abortController=null,this.extraProps={onSelect:this.onRowSelect}},mounted:function(){this.fetchSheetData()},methods:{fetchSheetData:function(){var t,e,n=this,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.files,d=this.activeFileIndex,f=this.searchQuery;if(r&&r.length){var h=r[d];if(h){if(o&&(this.isLoading=!0,this.noResultsFound=!1,this.items=[],this.dataPagination=null),!f&&l&&null!==(t=this.fileContentMap[h.filename])&&void 0!==t&&t.data){console.log("prefill from cache");var v=this.fileContentMap[h.filename];this.items=v.data,this.dataPagination=v.pagination}var w=m.b+"?fileId=".concat(h.filename);if(this.dataPagination){if(!(this.dataPagination.total_page>this.dataPagination.current_page))return;w+="&page=".concat(this.dataPagination.current_page+1)}f&&(w+="&query=".concat(f)),this.abortController&&(null===(e=this.abortController)||void 0===e||e.abort());var x=new AbortController;this.abortController=x;var y=x.signal;return fetch(w,{signal:y}).then((function(t){return t.json()})).then((function(t){console.log(t);var data=t.data,e=t.pagination;if(!Array.isArray(data)||!data.length)throw n.noResultsFound=!0,new Error("No Data Found");n.items=[].concat(Object(c.a)(n.items),Object(c.a)(data)),n.dataPagination=e;var o=n.fileContentMap[h.filename];f||(o?(o.data&&(o.data=[].concat(Object(c.a)(o.data),Object(c.a)(data))),o.pagination&&(o.pagination=e),n.fileContentMap[h.filename]=o):n.fileContentMap[h.filename]={data:data,pagination:e}),console.log(data,e,n.fileContentMap)})).catch((function(t){console.error(t)})).finally((function(){n.isLoading=!1}))}}},selectFile:function(t,e){this.$emit("onFileChange",e)},onScrollToBottom:function(){console.log("at bottom");var t=this.dataPagination;t&&t.total_page!==t.current_page?this.isLoading||(this.isLoading=!0,this.fetchSheetData()):console.warn("reached section end")},onSearch:(o=function(){this.fetchSheetData(!0,!1)},l=100,function(){var t=this,e=arguments;clearTimeout(r),r=setTimeout((function(){return o.apply(t,e)}),l)}),onRowSelect:function(t){console.log("on row select",t),this.activeRowData=t}},watch:{files:function(){this.fetchSheetData()},activeFileIndex:function(){this.searchQuery="",this.fetchSheetData(!0,!0)}}}),x=w,y=n(43),component=Object(y.a)(x,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-screen bg-gray-100 flex flex-col justify-center items-center"},[e("main",{staticClass:"relative overflow-hidden w-96 h-[640px] rounded-2xl bg-black shadow-lg shadow-black/40 p-2 text-white"},[e("div",{staticClass:"relative w-full h-full bg-white rounded-lg flex flex-col"},[e("main",{staticClass:"mt-5 relative mb-14 flex flex-col bg-gray-800 h-full w-full pt-3 w-full text-sm gap-2 text-gray-400 gap-3",staticStyle:{"min-height":"480px"}},[e("div",{staticClass:"flex flex-row justify-center px-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"rounded-md w-full pl-2 py-1 border border-gray-600 bg-gray-800",attrs:{type:"text",placeholder:"Search here"},domProps:{value:t.searchQuery},on:{input:[function(e){e.target.composing||(t.searchQuery=e.target.value)},t.onSearch]}})]),t._v(" "),e("virtual-list",{staticStyle:{"max-height":"420px","overflow-y":"auto"},attrs:{"data-key":"_id","data-sources":t.items,"data-component":t.itemRowComponent,"bottom-threshold":200,"extra-props":t.extraProps},on:{tobottom:function(){return t.onScrollToBottom()}}},[!t.noResultsFound||t.dataPagination&&t.dataPagination.total_page==t.dataPagination.current_page?e("div",{staticClass:"round-loader",attrs:{slot:"footer"},slot:"footer"}):t._e()]),t._v(" "),t.searchQuery&&t.noResultsFound&&!t.isLoading?e("p",{staticClass:"px-3 text-m font-bold"},[t._v('No results found for "'+t._s(t.searchQuery)+'"')]):t._e()],1),t._v(" "),e("nav",{staticClass:"absolute fixed bottom-0 left-0 w-full h-15 rounded-b-lg flex flex-row justify-between items-center text-gray-400 border-t bg-white"},[t._l(t.files,(function(n,o){return[e("button",{key:n._id,class:"flex-1 overflow-hidden flex flex-col p-2 text-black border border-white border-solid ".concat(o==t.activeFileIndex?" bg-white":"bg-gray-200"),on:{click:function(){return t.selectFile(n,o)}}},[e("p",{staticClass:"text-s break-words"},[t._v("File "+t._s(o+1))]),t._v(" "),e("p",{staticClass:"w-full text-left text-xs break-words text-ellipsis overflow-hidden whitespace-nowrap max-h-4"},[t._v(t._s(n.originalname))])])]}))],2),t._v(" "),e("div",{staticClass:"absolute w-full h-full bg-white top-0 p-5 left-0 z-4",style:"transition-duration: 400ms; ".concat(t.activeRowData?"":"transform: translateX(110%)")},[e("button",{staticClass:"p-4 text-black pl-0",on:{click:function(e){t.activeRowData=null}}},[t._v("ðŸ”™ Go Back")]),t._v(" "),e("hr",{staticClass:"mb-4"}),t._v(" "),t.activeRowData?[t._l(Object.keys(t.activeRowData),(function(n){return[e("ItemInfoRow",{key:n,attrs:{source:{key:n,value:t.activeRowData[n]}}})]}))]:t._e()],2)]),t._v(" "),t._m(0)])])}),[function(){var t=this._self._c;return t("div",{staticClass:"absolute fixed top-3 left-0 w-full z-10"},[t("div",{staticClass:"bg-black mx-auto h-3 w-3 rounded-full"})])}],!1,null,null,null);e.default=component.exports}}]);