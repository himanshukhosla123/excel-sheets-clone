(window.webpackJsonp=window.webpackJsonp||[]).push([[8,4,5,6,7],{263:function(t,e,o){var content=o(266);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(105).default)("99adfb28",content,!0,{sourceMap:!1})},264:function(t,e,o){var content=o(268);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(105).default)("1519b722",content,!0,{sourceMap:!1})},265:function(t,e,o){"use strict";o(263)},266:function(t,e,o){var n=o(104)((function(i){return i[1]}));n.push([t.i,".word-break{word-break:break-word}.border-bm{border-bottom-width:1px}",""]),n.locals={},t.exports=n},267:function(t,e,o){"use strict";o(264)},268:function(t,e,o){var n=o(104)((function(i){return i[1]}));n.push([t.i,".word-break{word-break:break-word}",""]),n.locals={},t.exports=n},269:function(t,e,o){var content=o(275);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(105).default)("3d9f0a3e",content,!0,{sourceMap:!1})},270:function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),o.d(e,"c",(function(){return r})),o.d(e,"b",(function(){return l}));"".concat("https://nodejs-angelone-63e2268382ae.herokuapp.com","/api/demo");var n="".concat("https://nodejs-angelone-63e2268382ae.herokuapp.com","/api/upload-excel"),r="".concat("https://nodejs-angelone-63e2268382ae.herokuapp.com","/api/get-user-sheets"),l="".concat("https://nodejs-angelone-63e2268382ae.herokuapp.com","/api/get-sheet-data")},271:function(t,e,o){"use strict";o.r(e);o(79),o(191),o(190),o(44),o(80);var n={name:"item-row",created:function(){var t=Object.keys(this.source);t.includes("_id")&&t.splice(t.indexOf("_id"),1),this.firstkey=t[0]},props:{onSelect:{type:Function,default:function(){}},index:{type:Number},source:{type:Object,default:function(){return{}}}}},r=(o(265),o(43)),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("div",[0==t.index?[e("div",{staticClass:"border-bm flex flex-row item-center cursor-pointer border-gray border-solid bg-white"},[e("div",{staticClass:"text-gray px-1 py-2 text-center",staticStyle:{"min-width":"47px","border-right":"1px solid #ccc"}},[t._v("S.No")]),t._v(" "),e("div",{staticClass:"break-words px-3 py-2 min-h-4 text-black font-bold"},[t._v(t._s(t.firstkey))])])]:t._e(),t._v(" "),e("div",{staticClass:"border-bm flex flex-row item-center cursor-pointer border-gray border-solid bg-white hover:bg-gray-100",on:{click:function(){return t.onSelect(t.source)}}},[e("div",{staticClass:"text-gray px-3 py-2 text-center",staticStyle:{"min-width":"47px","border-right":"1px solid #ccc"}},[t._v(t._s(t.index+1))]),t._v(" "),e("div",{staticClass:"break-words px-3 py-2 min-h-4 text-black word-break",on:{click:function(){return t.onSelect(t.source)}}},[t._v(t._s(t.source[t.firstkey]))])])],2)}),[],!1,null,null,null);e.default=component.exports},272:function(t,e,o){"use strict";o.r(e);o(190);var n={name:"item-row-info",props:{index:{type:Number},source:{type:Object,default:function(){return{}}}}},r=(o(267),o(43)),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return"_id"!=t.source.key&&"fileId"!=t.source.key?e("div",{staticClass:"flex flex-row item-center border-gray border-solid bg-white",staticStyle:{"border-width":"1px"}},[e("div",{staticClass:"text-gray-600 break-words px-3 py-2 w-4/12",staticStyle:{"border-right":"1px solid #ccc"}},[t._v(t._s(t.source.key))]),t._v(" "),e("div",{staticClass:"break-words px-3 py-2 min-h-4 text-black w-8/12 word-break"},[t._v(t._s(t.source.value))])]):t._e()}),[],!1,null,null,null);e.default=component.exports},274:function(t,e,o){"use strict";o(269)},275:function(t,e,o){var n=o(104)((function(i){return i[1]}));n.push([t.i,".bottom-close{bottom:calc(-100vh + 65px)}.bottom-open{bottom:-50vh}.smooth{transition:all .3s ease}",""]),n.locals={},t.exports=n},276:function(t,e,o){"use strict";o.r(e);o(44);var n,r,l,c=o(279),d=(o(106),o(190),o(20),o(280)),f=o.n(d),h=o(271),v=o(272),m=o(270),x=(o(81),{name:"ExcelView",components:{"virtual-list":f.a,ItemInfoRow:v.default},props:{files:{type:Array,default:function(){return[]}},activeFileIndex:{type:Number,default:0}},data:function(){return{items:[],isLoading:!1,dataPagination:null,noResultsFound:!1,itemRowComponent:h.default,searchQuery:"",activeRowData:null}},created:function(){this.fileContentMap={},this.abortController=null,this.extraProps={onSelect:this.onRowSelect}},mounted:function(){this.fetchSheetData()},methods:{fetchSheetData:function(){var t,e,o=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=this.files,d=this.activeFileIndex,f=this.searchQuery;if(l&&l.length){var h=l[d];if(h){if(n&&(this.isLoading=!0,this.noResultsFound=!1,this.items=[],this.dataPagination=null),!f&&r&&null!==(t=this.fileContentMap[h.filename])&&void 0!==t&&t.data){console.log("prefill from cache");var v=this.fileContentMap[h.filename];this.items=v.data,this.dataPagination=v.pagination}var x=m.b+"?fileId=".concat(h.filename);if(this.dataPagination){if(!(this.dataPagination.total_page>this.dataPagination.current_page))return;x+="&page=".concat(this.dataPagination.current_page+1)}f&&(x+="&query=".concat(f)),this.abortController&&(null===(e=this.abortController)||void 0===e||e.abort());var w=new AbortController;this.abortController=w;var _=w.signal;return fetch(x,{signal:_}).then((function(t){return t.json()})).then((function(t){console.log(t);var data=t.data,e=t.pagination;if(!Array.isArray(data)||!data.length)throw o.noResultsFound=!0,new Error("No Data Found");o.items=[].concat(Object(c.a)(o.items),Object(c.a)(data)),o.dataPagination=e;var n=o.fileContentMap[h.filename];f||(n?(n.data&&(n.data=[].concat(Object(c.a)(n.data),Object(c.a)(data))),n.pagination&&(n.pagination=e),o.fileContentMap[h.filename]=n):o.fileContentMap[h.filename]={data:data,pagination:e})})).catch((function(t){console.error(t)})).finally((function(){o.isLoading=!1}))}}},selectFile:function(t,e){this.$emit("onFileChange",e)},onScrollToBottom:function(){console.log("at bottom");var t=this.dataPagination;t&&t.total_page!==t.current_page?this.isLoading||(this.isLoading=!0,this.fetchSheetData()):console.warn("reached section end")},onSearch:(n=function(){this.fetchSheetData(!0,!1)},r=100,function(){var t=this,e=arguments;clearTimeout(l),l=setTimeout((function(){return n.apply(t,e)}),r)}),onRowSelect:function(t){console.log("on row select",t),this.activeRowData=t}},watch:{files:function(){this.fetchSheetData()},activeFileIndex:function(){this.searchQuery="",this.fetchSheetData(!0,!0)}}}),w=x,_=o(43),component=Object(_.a)(w,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-screen bg-gray-100 flex flex-col justify-center items-center"},[e("main",{staticClass:"relative overflow-hidden w-96 h-[640px] rounded-2xl bg-black shadow-lg shadow-black/40 p-2 text-white"},[e("div",{staticClass:"relative w-full h-full bg-white rounded-lg flex flex-col"},[e("main",{staticClass:"mt-5 relative mb-14 flex flex-col bg-gray-800 h-full w-full pt-3 w-full text-sm gap-2 text-gray-400 gap-3",staticStyle:{"min-height":"480px"}},[e("div",{staticClass:"flex flex-row justify-center px-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"rounded-md w-full pl-2 py-1 border border-gray-600 bg-white",attrs:{type:"text",placeholder:"Search here"},domProps:{value:t.searchQuery},on:{input:[function(e){e.target.composing||(t.searchQuery=e.target.value)},t.onSearch]}})]),t._v(" "),e("virtual-list",{ref:"viruallist",staticStyle:{"max-height":"420px","overflow-y":"auto"},attrs:{"data-key":"_id","data-sources":t.items,"data-component":t.itemRowComponent,"bottom-threshold":200,"extra-props":t.extraProps},on:{tobottom:function(){return t.onScrollToBottom()}}},[t.isLoading||!t.dataPagination||t.dataPagination.total_page>t.dataPagination.current_page?e("div",{staticClass:"round-loader",attrs:{slot:"footer"},slot:"footer"}):t._e()]),t._v(" "),t.searchQuery&&t.noResultsFound&&!t.isLoading?e("p",{staticClass:"px-3 text-m font-bold"},[t._v('No results found for "'+t._s(t.searchQuery)+'"')]):t._e()],1),t._v(" "),e("nav",{staticClass:"absolute fixed bottom-0 left-0 w-full h-15 rounded-b-lg flex flex-row justify-between items-center text-gray-400 border-t bg-gray-800",staticStyle:{"box-shadow":"0 2px 6px -2px rgb(0 106 194 / 20%)"}},[t._l(t.files,(function(o,n){return[e("button",{key:o._id,class:"flex-1 overflow-hidden flex flex-col p-2 text-black border border-gray border-solid ".concat(n==t.activeFileIndex?" bg-white":"bg-gray-200"),attrs:{title:o.originalname},on:{click:function(){return t.selectFile(o,n)}}},[e("p",{staticClass:"text- break-words"},[t._v("File "+t._s(n+1))]),t._v(" "),e("p",{staticClass:"w-full text-left text-xs break-words overflow-ellipsis overflow-hidden whitespace-nowrap max-h-4"},[t._v(t._s(o.originalname))])])]}))],2),t._v(" "),e("div",{staticClass:"absolute w-full h-full overflow-auto bg-white top-0 py-5 left-0 z-4",style:"transition-duration: 400ms; ".concat(t.activeRowData?"":"transform: translateX(110%)")},[e("button",{staticClass:"p-4 w-full bg-gray-800 text-white text-left",on:{click:function(e){t.activeRowData=null}}},[t._v("ðŸ”™ Go Back")]),t._v(" "),e("hr",{staticClass:"mb-4"}),t._v(" "),e("h3",{staticClass:"text-lg text-black pl-5"},[t._v("Detailed data view")]),t._v(" "),t.activeRowData?e("div",{staticClass:"p-5"},[t._l(Object.keys(t.activeRowData),(function(o){return[e("ItemInfoRow",{key:o,attrs:{source:{key:o,value:t.activeRowData[o]}}})]}))],2):t._e()])]),t._v(" "),t._m(0)])])}),[function(){var t=this._self._c;return t("div",{staticClass:"absolute fixed top-3 left-0 w-full z-10"},[t("div",{staticClass:"bg-black mx-auto h-3 w-3 rounded-full"})])}],!1,null,null,null);e.default=component.exports},277:function(t,e,o){"use strict";o.r(e);var n={name:"MainHeader"},r=o(43),component=Object(r.a)(n,(function(){this._self._c;return this._m(0)}),[function(){var t=this._self._c;return t("div",{staticClass:"w-full fixed z-50 top-0 left-0 bg-green-700 border border-solid border-grey shadow-lg py-4"},[t("h1",{staticClass:"text-lg text-white px-4 inline-block"},[this._v("Angle One Task - Himanshu Khosla")])])}],!1,null,null,null);e.default=component.exports},278:function(t,e,o){"use strict";o.r(e);o(273);var n={name:"ExcelInfoSection",props:{activeFile:{type:Object,default:null}},data:function(){return{isOpened:!1}},methods:{getFormattedSize:function(t){if(!t)return"";var e=t/1024,o=e/1024,n=o<1;return parseFloat(n?e:o).toFixed(2)+(n?" Kb":" Mb")}}},r=(o(274),o(43)),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-grey-100 h-screen fixed smooth cursor-pointer md:cursor-auto left-0 w-full bg-white md:static p-4 px-5 md:p-5 md:h-screen border-solid border-left border-grey",class:t.isOpened?"bottom-open":"bottom-close",on:{click:function(e){t.isOpened=!t.isOpened}}},[t._m(0),t._v(" "),e("hr",{staticClass:"mt-4"}),t._v(" "),t.activeFile?[e("div",{staticClass:"mb-5 mt-4"},[e("p",{staticClass:"text-m text-black mb-1"},[t._v("Name")]),t._v(" "),e("p",{staticClass:"text-sm text-grey-900"},[t._v(t._s(t.activeFile.originalname))])]),t._v(" "),e("div",{},[e("p",{staticClass:"text-m text-black mb-1"},[t._v("Size")]),t._v(" "),e("p",{staticClass:"text-m text-grey-900"},[t._v(t._s(t.getFormattedSize(t.activeFile.size)))])])]:t._e()],2)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-row-reverse items-center justify-end md:block"},[e("p",{staticClass:"text-2xl -mb-2 text-black block ml-auto sm:hidden"},[t._v("^")]),t._v(" "),e("h2",{staticClass:"text-lg text-black md:mb-5"},[t._v("File Info")]),t._v(" "),e("img",{staticClass:"w-8 mr-4 md:w-16 object-contain",attrs:{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/73/Microsoft_Excel_2013-2019_logo.svg/2170px-Microsoft_Excel_2013-2019_logo.svg.png",width:"60"}})])}],!1,null,null,null);e.default=component.exports},281:function(t,e,o){var content=o(287);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(105).default)("59aaa8a3",content,!0,{sourceMap:!1})},286:function(t,e,o){"use strict";o(281)},287:function(t,e,o){var n=o(104)((function(i){return i[1]}));n.push([t.i,".round-loader{animation:spin 1.5s linear infinite;border:.25rem solid #f4f4f4;border-radius:50%;border-top-color:#97a0be;height:2rem;margin:1.5rem auto 1rem;width:2rem}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn);-webkit-transform:rotate(1turn)}}.scale-15{transform:scale(2)}",""]),n.locals={},t.exports=n},288:function(t,e,o){"use strict";o.r(e);var n=o(279),r=(o(106),o(20),o(282),o(284)),l=o.n(r),c=o(277),d=o(276),f=o(278),h=o(270),v={name:"MainPage",components:{ExcelView:d.default,Header:c.default,Dropzone:l.a,ExcelInfoSection:f.default},data:function(){return{files:[],activeFileIndex:0,isLoadingSheets:!0,fileUploading:!1}},created:function(){this.MAX_NUMBER_OF_SHEETS=5,this.options={acceptedFiles:".csv",disablePreviews:!0,createImageThumbnails:!1,url:h.a,thumbnailWidth:200,maxFilesize:51200}},mounted:function(){this.fetchUserSheets()},methods:{uploadNewFile:function(){var t=this.$refs.el.dropzone;console.log(t)},fetchUserSheets:function(){var t=this;fetch(h.c).then((function(t){return t.json()})).then((function(e){console.log(e);var data=e.data;if(!Array.isArray(data)||!data.length)throw alert("No Data Found! Please upload one valid excel from below button"),new Error("No Data Found");t.files=data})).catch((function(t){console.error(t)})).finally((function(){t.isLoadingSheets=!1}))},onFileUpload:function(t,e){var o;(console.log(e),200===e.status)?(this.files=[].concat(Object(n.a)(this.files),[e.data]),null===(o=this.$refs.el)||void 0===o||o.removeAllFiles(),this.activeFileIndex=this.files.length-1):alert("Uploading failed");this.fileUploading=!1},onFileChange:function(t){this.activeFileIndex=t},onUploadError:function(){var t;null===(t=this.$refs.el)||void 0===t||t.removeAllFiles(),alert("Something went wrong while uploading! Please try later"),this.fileUploading=!1}}},m=(o(286),o(43)),component=Object(m.a)(v,(function(){var t=this,e=t._self._c;return e("div",{},[t.files.length<t.MAX_NUMBER_OF_SHEETS?e("Dropzone",{ref:"el",staticClass:"fixed bottom-4 border-2 border-gray-200 border-solid md:border-0 bottom-6 md:right-14 right-4 p-3 md:px-4 z-30 cursor-pointer rounded-full md:rounded md:w-64 bg-green-800 w-12 md:w-3/12 text-white text-center",attrs:{id:"foo",options:t.options,"use-custom-slot":!0,"destroy-dropzone":!0},on:{"vdropzone-success":t.onFileUpload,"vdropzone-sending":function(){return t.fileUploading=!0},"vdropzone-error":t.onUploadError,"vdropzone-canceled":t.onUploadError}},[e("p",{staticClass:"hidden md:block"},[t._v(t._s(t.fileUploading?"Uploading your File...":"Upload new excel"))]),t._v(" "),e("p",{staticClass:"block md:hidden",class:{"scale-15":!t.fileUploading}},[t._v(t._s(t.fileUploading?"Uploading...":"+"))])]):t._e(),t._v(" "),e("Header"),t._v(" "),e("div",{staticClass:"flex w-full flex-col md:flex-row items-center pt-14"},[e("ExcelView",{staticClass:"w-full md:w-8/12",attrs:{files:t.files,"active-file-index":t.activeFileIndex},on:{onFileChange:t.onFileChange}}),t._v(" "),e("ExcelInfoSection",{staticClass:"w-full md:w-4/12",attrs:{"active-file":t.files[t.activeFileIndex]}})],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Header:o(277).default,ExcelView:o(276).default,ExcelInfoSection:o(278).default})}}]);