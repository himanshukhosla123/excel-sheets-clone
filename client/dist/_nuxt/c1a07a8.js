(window.webpackJsonp=window.webpackJsonp||[]).push([[4,6,7],{263:function(t,e,o){var content=o(266);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(105).default)("99adfb28",content,!0,{sourceMap:!1})},264:function(t,e,o){var content=o(268);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(105).default)("1519b722",content,!0,{sourceMap:!1})},265:function(t,e,o){"use strict";o(263)},266:function(t,e,o){var n=o(104)((function(i){return i[1]}));n.push([t.i,".word-break{word-break:break-word}.border-bm{border-bottom-width:1px}",""]),n.locals={},t.exports=n},267:function(t,e,o){"use strict";o(264)},268:function(t,e,o){var n=o(104)((function(i){return i[1]}));n.push([t.i,".word-break{word-break:break-word}",""]),n.locals={},t.exports=n},270:function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),o.d(e,"c",(function(){return r})),o.d(e,"b",(function(){return l}));"".concat("https://nodejs-angelone-63e2268382ae.herokuapp.com","/api/demo");var n="".concat("https://nodejs-angelone-63e2268382ae.herokuapp.com","/api/upload-excel"),r="".concat("https://nodejs-angelone-63e2268382ae.herokuapp.com","/api/get-user-sheets"),l="".concat("https://nodejs-angelone-63e2268382ae.herokuapp.com","/api/get-sheet-data")},271:function(t,e,o){"use strict";o.r(e);o(79),o(191),o(190),o(44),o(80);var n={name:"item-row",created:function(){var t=Object.keys(this.source);t.includes("_id")&&t.splice(t.indexOf("_id"),1),this.firstkey=t[0]},props:{onSelect:{type:Function,default:function(){}},index:{type:Number},source:{type:Object,default:function(){return{}}}}},r=(o(265),o(43)),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("div",[0==t.index?[e("div",{staticClass:"border-bm flex flex-row item-center cursor-pointer border-gray border-solid bg-white"},[e("div",{staticClass:"text-gray px-1 py-2 text-center",staticStyle:{"min-width":"47px","border-right":"1px solid #ccc"}},[t._v("S.No")]),t._v(" "),e("div",{staticClass:"break-words px-3 py-2 min-h-4 text-black font-bold"},[t._v(t._s(t.firstkey))])])]:t._e(),t._v(" "),e("div",{staticClass:"border-bm flex flex-row item-center cursor-pointer border-gray border-solid bg-white hover:bg-gray-100",on:{click:function(){return t.onSelect(t.source)}}},[e("div",{staticClass:"text-gray px-3 py-2 text-center",staticStyle:{"min-width":"47px","border-right":"1px solid #ccc"}},[t._v(t._s(t.index+1))]),t._v(" "),e("div",{staticClass:"break-words px-3 py-2 min-h-4 text-black word-break",on:{click:function(){return t.onSelect(t.source)}}},[t._v(t._s(t.source[t.firstkey]))])])],2)}),[],!1,null,null,null);e.default=component.exports},272:function(t,e,o){"use strict";o.r(e);o(190);var n={name:"item-row-info",props:{index:{type:Number},source:{type:Object,default:function(){return{}}}}},r=(o(267),o(43)),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return"_id"!=t.source.key&&"fileId"!=t.source.key?e("div",{staticClass:"flex flex-row item-center border-gray border-solid bg-white",staticStyle:{"border-width":"1px"}},[e("div",{staticClass:"text-gray-600 break-words px-3 py-2 w-4/12",staticStyle:{"border-right":"1px solid #ccc"}},[t._v(t._s(t.source.key))]),t._v(" "),e("div",{staticClass:"break-words px-3 py-2 min-h-4 text-black w-8/12 word-break"},[t._v(t._s(t.source.value))])]):t._e()}),[],!1,null,null,null);e.default=component.exports},276:function(t,e,o){"use strict";o.r(e);o(44);var n,r,l,c=o(279),d=(o(106),o(190),o(20),o(280)),f=o.n(d),h=o(271),v=o(272),x=o(270),w=(o(81),{name:"ExcelView",components:{"virtual-list":f.a,ItemInfoRow:v.default},props:{files:{type:Array,default:function(){return[]}},activeFileIndex:{type:Number,default:0}},data:function(){return{items:[],isLoading:!1,dataPagination:null,noResultsFound:!1,itemRowComponent:h.default,searchQuery:"",activeRowData:null}},created:function(){this.fileContentMap={},this.abortController=null,this.extraProps={onSelect:this.onRowSelect}},mounted:function(){this.fetchSheetData()},methods:{fetchSheetData:function(){var t,e,o=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=this.files,d=this.activeFileIndex,f=this.searchQuery;if(l&&l.length){var h=l[d];if(h){if(n&&(this.isLoading=!0,this.noResultsFound=!1,this.items=[],this.dataPagination=null),!f&&r&&null!==(t=this.fileContentMap[h.filename])&&void 0!==t&&t.data){console.log("prefill from cache");var v=this.fileContentMap[h.filename];this.items=v.data,this.dataPagination=v.pagination}var w=x.b+"?fileId=".concat(h.filename);if(this.dataPagination){if(!(this.dataPagination.total_page>this.dataPagination.current_page))return;w+="&page=".concat(this.dataPagination.current_page+1)}f&&(w+="&query=".concat(f)),this.abortController&&(null===(e=this.abortController)||void 0===e||e.abort());var m=new AbortController;this.abortController=m;var y=m.signal;return fetch(w,{signal:y}).then((function(t){return t.json()})).then((function(t){console.log(t);var data=t.data,e=t.pagination;if(!Array.isArray(data)||!data.length)throw o.noResultsFound=!0,new Error("No Data Found");o.items=[].concat(Object(c.a)(o.items),Object(c.a)(data)),o.dataPagination=e;var n=o.fileContentMap[h.filename];f||(n?(n.data&&(n.data=[].concat(Object(c.a)(n.data),Object(c.a)(data))),n.pagination&&(n.pagination=e),o.fileContentMap[h.filename]=n):o.fileContentMap[h.filename]={data:data,pagination:e})})).catch((function(t){console.error(t)})).finally((function(){o.isLoading=!1}))}}},selectFile:function(t,e){this.$emit("onFileChange",e)},onScrollToBottom:function(){console.log("at bottom");var t=this.dataPagination;t&&t.total_page!==t.current_page?this.isLoading||(this.isLoading=!0,this.fetchSheetData()):console.warn("reached section end")},onSearch:(n=function(){this.fetchSheetData(!0,!1)},r=100,function(){var t=this,e=arguments;clearTimeout(l),l=setTimeout((function(){return n.apply(t,e)}),r)}),onRowSelect:function(t){console.log("on row select",t),this.activeRowData=t}},watch:{files:function(){this.fetchSheetData()},activeFileIndex:function(){this.searchQuery="",this.fetchSheetData(!0,!0)}}}),m=w,y=o(43),component=Object(y.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-screen bg-gray-100 flex flex-col justify-center items-center"},[e("main",{staticClass:"relative overflow-hidden w-96 h-[640px] rounded-2xl bg-black shadow-lg shadow-black/40 p-2 text-white"},[e("div",{staticClass:"relative w-full h-full bg-white rounded-lg flex flex-col"},[e("main",{staticClass:"mt-5 relative mb-14 flex flex-col bg-gray-800 h-full w-full pt-3 w-full text-sm gap-2 text-gray-400 gap-3",staticStyle:{"min-height":"480px"}},[e("div",{staticClass:"flex flex-row justify-center px-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"rounded-md w-full pl-2 py-1 border border-gray-600 bg-white",attrs:{type:"text",placeholder:"Search here"},domProps:{value:t.searchQuery},on:{input:[function(e){e.target.composing||(t.searchQuery=e.target.value)},t.onSearch]}})]),t._v(" "),e("virtual-list",{ref:"viruallist",staticStyle:{"max-height":"420px","overflow-y":"auto"},attrs:{"data-key":"_id","data-sources":t.items,"data-component":t.itemRowComponent,"bottom-threshold":200,"extra-props":t.extraProps},on:{tobottom:function(){return t.onScrollToBottom()}}},[t.isLoading||!t.dataPagination||t.dataPagination.total_page>t.dataPagination.current_page?e("div",{staticClass:"round-loader",attrs:{slot:"footer"},slot:"footer"}):t._e()]),t._v(" "),t.searchQuery&&t.noResultsFound&&!t.isLoading?e("p",{staticClass:"px-3 text-m font-bold"},[t._v('No results found for "'+t._s(t.searchQuery)+'"')]):t._e()],1),t._v(" "),e("nav",{staticClass:"absolute fixed bottom-0 left-0 w-full h-15 rounded-b-lg flex flex-row justify-between items-center text-gray-400 border-t bg-gray-800",staticStyle:{"box-shadow":"0 2px 6px -2px rgb(0 106 194 / 20%)"}},[t._l(t.files,(function(o,n){return[e("button",{key:o._id,class:"flex-1 overflow-hidden flex flex-col p-2 text-black border border-gray border-solid ".concat(n==t.activeFileIndex?" bg-white":"bg-gray-200"),attrs:{title:o.originalname},on:{click:function(){return t.selectFile(o,n)}}},[e("p",{staticClass:"text- break-words"},[t._v("File "+t._s(n+1))]),t._v(" "),e("p",{staticClass:"w-full text-left text-xs break-words overflow-ellipsis overflow-hidden whitespace-nowrap max-h-4"},[t._v(t._s(o.originalname))])])]}))],2),t._v(" "),e("div",{staticClass:"absolute w-full h-full overflow-auto bg-white top-0 py-5 left-0 z-4",style:"transition-duration: 400ms; ".concat(t.activeRowData?"":"transform: translateX(110%)")},[e("button",{staticClass:"p-4 w-full bg-gray-800 text-white text-left",on:{click:function(e){t.activeRowData=null}}},[t._v("ðŸ”™ Go Back")]),t._v(" "),e("hr",{staticClass:"mb-4"}),t._v(" "),e("h3",{staticClass:"text-lg text-black pl-5"},[t._v("Detailed data view")]),t._v(" "),t.activeRowData?e("div",{staticClass:"p-5"},[t._l(Object.keys(t.activeRowData),(function(o){return[e("ItemInfoRow",{key:o,attrs:{source:{key:o,value:t.activeRowData[o]}}})]}))],2):t._e()])]),t._v(" "),t._m(0)])])}),[function(){var t=this._self._c;return t("div",{staticClass:"absolute fixed top-3 left-0 w-full z-10"},[t("div",{staticClass:"bg-black mx-auto h-3 w-3 rounded-full"})])}],!1,null,null,null);e.default=component.exports}}]);